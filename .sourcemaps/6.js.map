{"version":3,"sources":["../../src/pages/prescription-list/prescription-list.module.ts","../../src/pages/prescription-list/prescription-list.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PrescriptionListPage } from './prescription-list';\n\n@NgModule({\n  declarations: [\n    PrescriptionListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PrescriptionListPage),\n  ],\n  exports: [\n    PrescriptionListPage\n  ]\n})\nexport class PrescriptionListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/prescription-list/prescription-list.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, MenuController, Content, Platform } from 'ionic-angular';\nimport { LoadingController } from 'ionic-angular';\nimport { Events } from 'ionic-angular';\nimport { SMS } from '@ionic-native/sms';\nimport { LocalNotifications } from '@ionic-native/local-notifications';\n\nimport { Rest } from '../../providers/rest';\n\n@IonicPage()\n@Component({\n  selector: 'page-prescription-list',\n  templateUrl: 'prescription-list.html',\n})\nexport class PrescriptionListPage {\n  @ViewChild(Content) content: Content;\n  scode: string;\n  dlg: any;\n  data_count: number;\n  first_name: string;\n  custom_class: any;\n  message: string;\n  datetime: string;\n  data: any;\n  add_sound: any;\n  timerID: number;\n  disableRemind: boolean;\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n        public loadingCtrl: LoadingController, public events: Events,\n  \t\t\tpublic menu: MenuController, public rest: Rest, private smsVar: SMS,\n        private localNotifications: LocalNotifications,\n        public platform: Platform) {\n  \tthis.menu = menu;\n  \tthis.data = null;\n    this.custom_class = {};\n    this.custom_class['Ready'] = 'green-text';\n    this.custom_class['In Progress'] = 'blue-text';\n    this.custom_class['On Order'] = 'orange-text';\n    this.custom_class['YES'] = 'green-text';\n    this.custom_class['NO'] = 'blue-text';\n\n    this.data_count = 0;\n    this.timerID = -1;\n\n    this.dlg = {};\n    this.dlg['show'] = 0;\n    this.dlg['maxWidth'] = 600;\n    this.dlg['left'] = 0;\n    this.dlg['top'] = 0;\n    this.dlg['width'] = 200;\n    this.dlg['height'] = 100;\n    \n  }\n  ionViewWillEnter() {\n\n    this.navCtrl.parent.superTabsCtrl.showToolbar(true);\n    this.first_name = this.rest.getFirstName();\n    this.rest.getDrugProperty(this);\n    if (this.rest.isShowTab()){\n      this.events.publish('menu:changed', 'Exit Review');\n      this.navCtrl.parent._tabs[0].title = \"Exit Review\";\n    }\n  }\n  reloadData() {\n    this.rest.getDrugProperty(this);\n  }\n  ionViewWillLeave() {\n    this.navCtrl.parent._tabs[0].title = \"Home\";\n  }\n  ionViewDidLoad() {\n    \n  }\n  setData(d) {\n    this.data = d;\n    this.data_count = this.data.length;\n    if (this.data_count > 0)\n    {\n      this.rest.setNdc(this.data[0]['ndc'])\n      this.rest.setGenericName(this.data[0]['generic_name']);\n    }\n  }\n  showMenu() {\n    this.menu.open();\n  }\n  goReview(data) {\n    this.rest.setNdc(data['ndc'])\n    this.rest.setGenericName(data['generic_name']);\n    this.navCtrl.parent.slideTo(2);\n  }\n\n  remindButton() {\n    // this.localNotifications.schedule({\n    //   id: 1,\n    //   text: 'Single ILocalNotification',\n    //   sound: 'tone/alarm.mp3'\n    // });\n    this.toggleDlg(5);\n  }\n  contactPharmacy() {\n    this.toggleDlg(3);\n  }\n  deliverButton() {\n    this.toggleDlg(1);\n  }\n  toggleDlg(b: number)\n  {\n    console.log(b);\n    if (b % 2 == 1)\n    {\n      var scrollPos = this.content.getContentDimensions().scrollTop;\n      this.dlg['width'] = this.platform.width() * 0.9;\n      if (this.dlg['width'] > this.dlg['maxWidth'])\n        this.dlg['width'] = this.dlg['maxWidth'];\n      this.dlg['left'] = (this.platform.width() - this.dlg['width']) / 2;\n      if (b == 5) {\n        this.dlg['height'] = 180;\n        let dt = new Date();\n        let offset = -240; //Timezone offset for EST in minutes.\n        this.datetime = new Date(dt.getTime() + offset*60*1000).toISOString();\n        this.disableRemind = false;\n      }\n      this.dlg['top'] = (this.platform.height() - this.dlg['height']) / 2 + scrollPos - 30;\n    }\n    else if (b == 2)\n    {\n      var options={\n          replaceLineBreaks: false, // true to replace \\n by a new line, false by default\n          android: {\n               intent: 'INTENT'  // Opens Default sms app\n              //intent: '' // Sends sms without opening default sms app\n            }\n      }\n      b = 0;\n      this.smsVar.send(this.rest.getCellPhone(), 'Patient request delivery',options)\n        .then(()=>{\n          alert(\"success\");\n        },()=>{\n          alert(\"failed\");\n        });\n      // this.rest.deliverMessage(this);\n    }\n    else if (b == 4) {\n      b = 0;\n      var options={\n          replaceLineBreaks: false, // true to replace \\n by a new line, false by default\n          android: {\n               intent: 'INTENT'  // Opens Default sms app\n              //intent: '' // Sends sms without opening default sms app\n            }\n      }\n      this.smsVar.send(this.rest.getCellPhone(), this.message ,options)\n        .then(()=>{\n          alert(\"success\");\n        },()=>{\n          alert(\"failed\");\n        });\n    }\n    else if (b == 6) {\n      let __this =this;\n      clearTimeout(this.timerID);\n      this.timerID = setTimeout(function(){__this.startReminder()}, 1000);\n      b = 0;\n    }\n    else if (b == 8) {\n      this.disableRemind = true;\n      clearTimeout(this.timerID);\n    }\n    this.dlg['show'] = b;\n  }\n  startReminder() {\n    console.log(this);\n    if (!this.disableRemind) {\n      let date = new Date().getTime();\n      let reminder = new Date(this.datetime).getTime();\n      date += -240*60*1000;\n      console.log(date, reminder);\n      if (reminder > date){\n        let __this = this;\n        clearTimeout(this.timerID);\n        this.timerID = setTimeout(function(){__this.startReminder()}, 1000);\n      }\n      else if ((date - reminder) <= 1000)\n      {\n        let setting = {\n          id: 1,\n          text: \"Reminder Notification\"\n        }\n        console.log(setting);\n        if (this.add_sound)\n          setting['sound'] = 'tone/alar.mp3';\n        this.localNotifications.schedule(setting);\n      }\n      else{\n        clearTimeout(this.timerID);\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/prescription-list/prescription-list.ts"],"sourceRoot":""}